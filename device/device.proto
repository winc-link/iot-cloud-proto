syntax = "proto3";

package device;
option go_package = "github.com/winc-link/iot-cloud-proto/device";
import "common/common.proto";
import "google/protobuf/timestamp.proto";

message ConnectIotCloudRequest {
  string deviceId = 1;
  string driverId = 2;
  map<string, string> extra =3;
}

message QueryDeviceDetailRequest {
  string deviceId = 1;
}

message QueryDeviceDetailResponse {
  message Data {
    string Status = 1;
    string DeviceId = 2;
    string DeviceName = 3;
    string DeviceSecret = 4;
    google.protobuf.Timestamp UtcCreate = 5;
    string description = 6;
    string NodeType = 7;
    map<string, string> extra = 8;
  }
  Data data = 1;
  string RequestId = 2;
  string Code = 3;
  bool Success = 4;
  string errorMessage = 5;
}

message GetDeviceStatusRequest {
  string deviceId = 1;
}


message GetDeviceStatusResponse {
  message Data {
    string Status = 1;
    uint64 Timestamp = 2;
  }

  Data data = 1;
  string RequestId = 2;
  string Code = 3;
  bool Success = 4;
  string errorMessage = 5;
}

message RegisterDeviceRequest {
  string DeviceName = 1;
  string ProductKey = 2;
  map<string, string> extra =3;
}

message RegisterDeviceResponse {
  string DeviceId = 1;
  string DeviceSecret = 2;
  map<string, string> extra =3;
}


message QueryDeviceListRequest {
  map<string, string> extra =1;
}

message QueryDeviceListResponse {
  message DeviceInfo {
    string Status = 1;
    string DeviceId = 2;
    string DeviceName = 3;
    string DeviceSecret = 4;
    google.protobuf.Timestamp UtcCreate = 5;
    string description = 6;
    string NodeType = 7;
    map<string, string> extra = 8;
  }
  message List {
    repeated DeviceInfo DeviceInfo = 1;
  }
  message Data {
    uint32 Total = 4;
    List List = 5;
  }
  Data data = 1;
  string RequestId = 2;
  string Code = 3;
  bool Success = 4;
  string errorMessage = 5;
}

service RpcDevice {
  //连接云服务
  rpc ConnectIotCloud(ConnectIotCloudRequest) returns (common.CommonResponse) {}
  // 查询指定设备的详细信息
  rpc QueryDeviceDetail(QueryDeviceDetailRequest) returns (QueryDeviceDetailResponse) {}
  //查询所有设备
  rpc QueryDeviceList(QueryDeviceListRequest) returns (QueryDeviceListResponse) {}
  // 查询设备状态
  rpc GetDeviceStatus (GetDeviceStatusRequest) returns(GetDeviceStatusResponse){}
  // 添加设备
  rpc RegisterDevice (RegisterDeviceRequest) returns (RegisterDeviceResponse) {}
  // 删除设备
//  rpc RegisterDevice (RegisterDeviceRequest) returns (RegisterDeviceResponse) {}

}